<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>endgame</title>

        <link rel="stylesheet" href="css/endgame.css">

        <!-- Dependencies -->
        <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
        <script src="js/vendor/three.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/vue/0.11.4/vue.js"></script>
        <script src="https://code.jquery.com/jquery-2.1.3.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.js"></script>
        <script src="js/vendor/peer.js"></script>
        <script src="js/vendor/three.canvasrenderer.js"></script>
        <script src="js/vendor/three.copyshader.js"></script>
        <script src="js/vendor/three.convolutionshader.js"></script>
        <script src="js/vendor/three.fxaashader.js"></script>
        <script src="js/vendor/three.ssaoshader.js"></script>
        <script src="js/vendor/three.effectcomposer.js"></script>
        <script src="js/vendor/three.bloompass.js"></script>
        <script src="js/vendor/three.maskpass.js"></script>
        <script src="js/vendor/three.renderpass.js"></script>
        <script src="js/vendor/three.shaderpass.js"></script>
        <script src="js/vendor/three.texturepass.js"></script>
        <script src="js/vendor/three.mirror.js"></script>
        <script src="js/vendor/three.orbitcontrols.js"></script>
        <script src="js/vendor/chess.js"></script>
        <script src="js/vendor/tween.js"></script>

        <script src="js/endgame.js" defer></script>
    </head>
    <body>
        <!-- Templated components -->
        <div id="waitscreen" class="notice modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">
                            <span class="label label-default">endgame</span> - A WebRTC-enabled 3D chess game
                        </h4>
                    </div>
                    <div class="modal-body">
                        <p>A game room has been created for you! Send this link to a friend to have them join:</p>
                        <p><code v-on="click: onClick($event)">{{link}}</code></p>
                        <p>The game will automatically continue once they join.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="mediascreen" class="notice modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">
                            <span class="label label-default">endgame</span>
                        </h4>
                    </div>
                    <div class="modal-body">
                        <p>Now we need to setup the media call. If you have a webcam and mic, you can click <code>Allow</code> to permit the video feed to be sent to your friend.</p>
                        <p>Don't worry, if you don't have a webcam or just don't want to use it, you can still play endgame (but if you've blocked it before, you may not receive a notification and may need to manually allow it; look for an icon of a camera with an <code>X</code> over it).</p>
                        <p>The game will automatically continue when both you and your friend have allowed or denied media access.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="promotionscreen" class="snotice modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">
                            <span class="label label-default">Promotion</span>
                        </h4>
                    </div>
                    <div class="modal-body container-fluid">
                        <div class="col-md-3 text-center" v-repeat="piece: pieces">
                            <a href="#" v-on="click: onClick(piece, $event)">
                                <img class="promotion-icon img-thumbnail"
                                    v-attr="src: 'data/' + color + '_' + piece + '.svg'">
                                <div class="caption">
                                    {{piece | capitalize}}
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="localvideopanel" class="local-video-panel panel panel-default">
            <div class="panel-body">
                <video id="localvideo" autoplay muted></video>
            </div>
        </div>
    </body>
</html>
