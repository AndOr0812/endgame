!function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){function n(){for(;o.next;){o=o.next;var e=o.task;o.task=void 0;var t=o.domain;t&&(o.domain=void 0,t.enter());try{e()}catch(r){if(l)throw t&&t.exit(),setTimeout(n,0),t&&t.enter(),r;setTimeout(function(){throw r},0)}t&&t.exit()}a=!1}function r(t){i=i.next={task:t,domain:l&&e.domain,next:null},a||(a=!0,u())}var o={task:void 0,next:null},i=o,a=!1,u=void 0,l=!1;if("undefined"!=typeof e&&e.nextTick)l=!0,u=function(){e.nextTick(n)};else if("function"==typeof setImmediate)u="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=n,u=function(){f.port2.postMessage(0)}}else u=function(){setTimeout(n,0)};t.exports=r}).call(this,e("_process"))},{_process:3}],2:[function(e,t,n){(function(e){(function(){function r(e,t,n){for(var r=(n||0)-1,o=e?e.length:0;++r<o;)if(e[r]===t)return r;return-1}function o(e,t){var n=typeof t;if(e=e.cache,"boolean"==n||null==t)return e[t]?0:-1;"number"!=n&&"string"!=n&&(n="object");var o="number"==n?t:w+t;return e=(e=e[n])&&e[o],"object"==n?e&&r(e,t)>-1?0:-1:e?0:-1}function i(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:w+e,o=t[n]||(t[n]={});"object"==n?(o[r]||(o[r]=[])).push(e):o[r]=!0}}function a(e){return e.charCodeAt(0)}function u(e,t){for(var n=e.criteria,r=t.criteria,o=-1,i=n.length;++o<i;){var a=n[o],u=r[o];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return e.index-t.index}function l(e){var t=-1,n=e.length,r=e[0],o=e[n/2|0],a=e[n-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var u=s();u["false"]=u["null"]=u["true"]=u.undefined=!1;var l=s();for(l.array=e,l.cache=u,l.push=i;++t<n;)l.push(e[t]);return l}function f(e){return"\\"+J[e]}function c(){return g.pop()||[]}function s(){return y.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function d(e){e.length=0,g.length<M&&g.push(e)}function p(e){var t=e.cache;t&&p(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,y.length<M&&y.push(e)}function h(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,i=Array(0>o?0:o);++r<o;)i[r]=e[t+r];return i}function v(e){function t(e){return e&&"object"==typeof e&&!Zn(e)&&Ln.call(e,"__wrapped__")?e:new n(e)}function n(e,t){this.__chain__=!!t,this.__wrapped__=e}function i(e){function t(){if(r){var e=h(r);An.apply(e,arguments)}if(this instanceof t){var i=y(n.prototype),a=n.apply(i,e||arguments);return Se(a)?a:i}return n.apply(o,e||arguments)}var n=e[0],r=e[2],o=e[4];return Xn(t,e),t}function g(e,t,n,r,o){if(n){var i=n(e);if("undefined"!=typeof i)return i}var a=Se(e);if(!a)return e;var u=jn.call(e);if(!$[u])return e;var l=Kn[u];switch(u){case I:case q:return new l(+e);case G:case B:return new l(e);case N:return i=l(e.source,R.exec(e)),i.lastIndex=e.lastIndex,i}var f=Zn(e);if(t){var s=!r;r||(r=c()),o||(o=c());for(var p=r.length;p--;)if(r[p]==e)return o[p];i=f?l(e.length):{}}else i=f?h(e):ir({},e);return f&&(Ln.call(e,"index")&&(i.index=e.index),Ln.call(e,"input")&&(i.input=e.input)),t?(r.push(e),o.push(i),(f?Je:lr)(e,function(e,a){i[a]=g(e,t,n,r,o)}),s&&(d(r),d(o)),i):i}function y(e,t){return Se(e)?qn(e):{}}function M(e,t,n){if("function"!=typeof e)return Xt;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(Jn.funcNames&&(r=!e.name),r=r||!Jn.funcDecomp,!r)){var o=Hn.call(e);Jn.funcNames||(r=!k.test(o)),r||(r=C.test(o),Xn(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)}}return Lt(e,t)}function J(e){function t(){var e=l?a:this;if(o){var p=h(o);An.apply(p,arguments)}if((i||c)&&(p||(p=h(arguments)),i&&An.apply(p,i),c&&p.length<u))return r|=16,J([n,s?r:-4&r,p,null,a,u]);if(p||(p=arguments),f&&(n=e[d]),this instanceof t){e=y(n.prototype);var v=n.apply(e,p);return Se(v)?v:e}return n.apply(e,p)}var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],u=e[5],l=1&r,f=2&r,c=4&r,s=8&r,d=n;return Xn(t,e),t}function Z(e,t){var n=-1,i=le(),a=e?e.length:0,u=a>=_&&i===r,f=[];if(u){var c=l(t);c?(i=o,t=c):u=!1}for(;++n<a;){var s=e[n];i(t,s)<0&&f.push(s)}return u&&p(t),f}function Q(e,t,n,r){for(var o=(r||0)-1,i=e?e.length:0,a=[];++o<i;){var u=e[o];if(u&&"object"==typeof u&&"number"==typeof u.length&&(Zn(u)||de(u))){t||(u=Q(u,t,n));var l=-1,f=u.length,c=a.length;for(a.length+=f;++l<f;)a[c++]=u[l]}else n||a.push(u)}return a}function ee(e,t,n,r,o,i){if(n){var a=n(e,t);if("undefined"!=typeof a)return!!a}if(e===t)return 0!==e||1/e==1/t;var u=typeof e,l=typeof t;if(!(e!==e||e&&K[u]||t&&K[l]))return!1;if(null==e||null==t)return e===t;var f=jn.call(e),s=jn.call(t);if(f==F&&(f=W),s==F&&(s=W),f!=s)return!1;switch(f){case I:case q:return+e==+t;case G:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case N:case B:return e==Mn(t)}var p=f==D;if(!p){var h=Ln.call(e,"__wrapped__"),v=Ln.call(t,"__wrapped__");if(h||v)return ee(h?e.__wrapped__:e,v?t.__wrapped__:t,n,r,o,i);if(f!=W)return!1;var m=e.constructor,g=t.constructor;if(m!=g&&!(ke(m)&&m instanceof m&&ke(g)&&g instanceof g)&&"constructor"in e&&"constructor"in t)return!1}var y=!o;o||(o=c()),i||(i=c());for(var b=o.length;b--;)if(o[b]==e)return i[b]==t;var w=0;if(a=!0,o.push(e),i.push(t),p){if(b=e.length,w=t.length,a=w==b,a||r)for(;w--;){var _=b,M=t[w];if(r)for(;_--&&!(a=ee(e[_],M,n,r,o,i)););else if(!(a=ee(e[w],M,n,r,o,i)))break}}else ur(t,function(t,u,l){return Ln.call(l,u)?(w++,a=Ln.call(e,u)&&ee(e[u],t,n,r,o,i)):void 0}),a&&!r&&ur(e,function(e,t,n){return Ln.call(n,t)?a=--w>-1:void 0});return o.pop(),i.pop(),y&&(d(o),d(i)),a}function te(e,t,n,r,o){(Zn(t)?Je:lr)(t,function(t,i){var a,u,l=t,f=e[i];if(t&&((u=Zn(t))||fr(t))){for(var c=r.length;c--;)if(a=r[c]==t){f=o[c];break}if(!a){var s;n&&(l=n(f,t),(s="undefined"!=typeof l)&&(f=l)),s||(f=u?Zn(f)?f:[]:fr(f)?f:{}),r.push(t),o.push(f),s||te(f,t,n,r,o)}}else n&&(l=n(f,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(f=l);e[i]=f})}function re(e,t){return e+Pn(Yn()*(t-e+1))}function oe(e,t,n){var i=-1,a=le(),u=e?e.length:0,f=[],s=!t&&u>=_&&a===r,h=n||s?c():f;if(s){var v=l(h);a=o,h=v}for(;++i<u;){var m=e[i],g=n?n(m,i,e):m;(t?!i||h[h.length-1]!==g:a(h,g)<0)&&((n||s)&&h.push(g),f.push(m))}return s?(d(h.array),p(h)):n&&d(h),f}function ie(e){return function(n,r,o){var i={};r=t.createCallback(r,o,3);var a=-1,u=n?n.length:0;if("number"==typeof u)for(;++a<u;){var l=n[a];e(i,l,r(l,a,n),n)}else lr(n,function(t,n,o){e(i,t,r(t,n,o),o)});return i}}function ae(e,t,n,r,o,a){var u=1&t,l=2&t,f=4&t,c=16&t,s=32&t;if(!l&&!ke(e))throw new Tn;c&&!n.length&&(t&=-17,c=n=!1),s&&!r.length&&(t&=-33,s=r=!1);var d=e&&e.__bindData__;if(d&&d!==!0)return d=h(d),d[2]&&(d[2]=h(d[2])),d[3]&&(d[3]=h(d[3])),!u||1&d[1]||(d[4]=o),!u&&1&d[1]&&(t|=8),!f||4&d[1]||(d[5]=a),c&&An.apply(d[2]||(d[2]=[]),n),s&&Dn.apply(d[3]||(d[3]=[]),r),d[1]|=t,ae.apply(null,d);var p=1==t||17===t?i:J;return p([e,t,n,r,o,a])}function ue(e){return tr[e]}function le(){var e=(e=t.indexOf)===gt?r:e;return e}function fe(e){return"function"==typeof e&&Rn.test(e)}function ce(e){var t,n;return e&&jn.call(e)==W&&(t=e.constructor,!ke(t)||t instanceof t)?(ur(e,function(e,t){n=t}),"undefined"==typeof n||Ln.call(e,n)):!1}function se(e){return nr[e]}function de(e){return e&&"object"==typeof e&&"number"==typeof e.length&&jn.call(e)==F||!1}function pe(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),g(e,t,"function"==typeof n&&M(n,r,1))}function he(e,t,n){return g(e,!0,"function"==typeof t&&M(t,n,1))}function ve(e,t){var n=y(e);return t?ir(n,t):n}function me(e,n,r){var o;return n=t.createCallback(n,r,3),lr(e,function(e,t,r){return n(e,t,r)?(o=t,!1):void 0}),o}function ge(e,n,r){var o;return n=t.createCallback(n,r,3),be(e,function(e,t,r){return n(e,t,r)?(o=t,!1):void 0}),o}function ye(e,t,n){var r=[];ur(e,function(e,t){r.push(t,e)});var o=r.length;for(t=M(t,n,3);o--&&t(r[o--],r[o],e)!==!1;);return e}function be(e,t,n){var r=er(e),o=r.length;for(t=M(t,n,3);o--;){var i=r[o];if(t(e[i],i,e)===!1)break}return e}function we(e){var t=[];return ur(e,function(e,n){ke(e)&&t.push(n)}),t.sort()}function _e(e,t){return e?Ln.call(e,t):!1}function Me(e){for(var t=-1,n=er(e),r=n.length,o={};++t<r;){var i=n[t];o[e[i]]=i}return o}function Te(e){return e===!0||e===!1||e&&"object"==typeof e&&jn.call(e)==I||!1}function Ee(e){return e&&"object"==typeof e&&jn.call(e)==q||!1}function xe(e){return e&&1===e.nodeType||!1}function Oe(e){var t=!0;if(!e)return t;var n=jn.call(e),r=e.length;return n==D||n==B||n==F||n==W&&"number"==typeof r&&ke(e.splice)?!r:(lr(e,function(){return t=!1}),t)}function je(e,t,n,r){return ee(e,t,"function"==typeof n&&M(n,r,2))}function Re(e){return Gn(e)&&!Wn(parseFloat(e))}function ke(e){return"function"==typeof e}function Se(e){return!(!e||!K[typeof e])}function Pe(e){return Ce(e)&&e!=+e}function He(e){return null===e}function Ce(e){return"number"==typeof e||e&&"object"==typeof e&&jn.call(e)==G||!1}function Le(e){return e&&"object"==typeof e&&jn.call(e)==N||!1}function Ae(e){return"string"==typeof e||e&&"object"==typeof e&&jn.call(e)==B||!1}function ze(e){return"undefined"==typeof e}function Fe(e,n,r){var o={};return n=t.createCallback(n,r,3),lr(e,function(e,t,r){o[t]=n(e,t,r)}),o}function De(e){var t=arguments,n=2;if(!Se(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=M(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var o=h(arguments,1,n),i=-1,a=c(),u=c();++i<n;)te(e,o[i],r,a,u);return d(a),d(u),e}function Ie(e,n,r){var o={};if("function"!=typeof n){var i=[];ur(e,function(e,t){i.push(t)}),i=Z(i,Q(arguments,!0,!1,1));for(var a=-1,u=i.length;++a<u;){var l=i[a];o[l]=e[l]}}else n=t.createCallback(n,r,3),ur(e,function(e,t,r){n(e,t,r)||(o[t]=e)});return o}function qe(e){for(var t=-1,n=er(e),r=n.length,o=hn(r);++t<r;){var i=n[t];o[t]=[i,e[i]]}return o}function Ue(e,n,r){var o={};if("function"!=typeof n)for(var i=-1,a=Q(arguments,!0,!1,1),u=Se(e)?a.length:0;++i<u;){var l=a[i];l in e&&(o[l]=e[l])}else n=t.createCallback(n,r,3),ur(e,function(e,t,r){n(e,t,r)&&(o[t]=e)});return o}function Ge(e,n,r,o){var i=Zn(e);if(null==r)if(i)r=[];else{var a=e&&e.constructor,u=a&&a.prototype;r=y(u)}return n&&(n=t.createCallback(n,o,4),(i?Je:lr)(e,function(e,t,o){return n(r,e,t,o)})),r}function We(e){for(var t=-1,n=er(e),r=n.length,o=hn(r);++t<r;)o[t]=e[n[t]];return o}function Ne(e){for(var t=arguments,n=-1,r=Q(t,!0,!1,1),o=t[2]&&t[2][t[1]]===e?1:r.length,i=hn(o);++n<o;)i[n]=e[r[n]];return i}function Be(e,t,n){var r=-1,o=le(),i=e?e.length:0,a=!1;return n=(0>n?Bn(0,i+n):n)||0,Zn(e)?a=o(e,t,n)>-1:"number"==typeof i?a=(Ae(e)?e.indexOf(t,n):o(e,t,n))>-1:lr(e,function(e){return++r>=n?!(a=e===t):void 0}),a}function $e(e,n,r){var o=!0;n=t.createCallback(n,r,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;++i<a&&(o=!!n(e[i],i,e)););else lr(e,function(e,t,r){return o=!!n(e,t,r)});return o}function Ve(e,n,r){var o=[];n=t.createCallback(n,r,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;++i<a;){var u=e[i];n(u,i,e)&&o.push(u)}else lr(e,function(e,t,r){n(e,t,r)&&o.push(e)});return o}function Ye(e,n,r){n=t.createCallback(n,r,3);var o=-1,i=e?e.length:0;if("number"!=typeof i){var a;return lr(e,function(e,t,r){return n(e,t,r)?(a=e,!1):void 0}),a}for(;++o<i;){var u=e[o];if(n(u,o,e))return u}}function Ke(e,n,r){var o;return n=t.createCallback(n,r,3),Xe(e,function(e,t,r){return n(e,t,r)?(o=e,!1):void 0}),o}function Je(e,t,n){var r=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof n?t:M(t,n,3),"number"==typeof o)for(;++r<o&&t(e[r],r,e)!==!1;);else lr(e,t);return e}function Xe(e,t,n){var r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:M(t,n,3),"number"==typeof r)for(;r--&&t(e[r],r,e)!==!1;);else{var o=er(e);r=o.length,lr(e,function(e,n,i){return n=o?o[--r]:--r,t(i[n],n,i)})}return e}function Ze(e,t){var n=h(arguments,2),r=-1,o="function"==typeof t,i=e?e.length:0,a=hn("number"==typeof i?i:0);return Je(e,function(e){a[++r]=(o?t:e[t]).apply(e,n)}),a}function Qe(e,n,r){var o=-1,i=e?e.length:0;if(n=t.createCallback(n,r,3),"number"==typeof i)for(var a=hn(i);++o<i;)a[o]=n(e[o],o,e);else a=[],lr(e,function(e,t,r){a[++o]=n(e,t,r)});return a}function et(e,n,r){var o=-(1/0),i=o;if("function"!=typeof n&&r&&r[n]===e&&(n=null),null==n&&Zn(e))for(var u=-1,l=e.length;++u<l;){var f=e[u];f>i&&(i=f)}else n=null==n&&Ae(e)?a:t.createCallback(n,r,3),Je(e,function(e,t,r){var a=n(e,t,r);a>o&&(o=a,i=e)});return i}function tt(e,n,r){var o=1/0,i=o;if("function"!=typeof n&&r&&r[n]===e&&(n=null),null==n&&Zn(e))for(var u=-1,l=e.length;++u<l;){var f=e[u];i>f&&(i=f)}else n=null==n&&Ae(e)?a:t.createCallback(n,r,3),Je(e,function(e,t,r){var a=n(e,t,r);o>a&&(o=a,i=e)});return i}function nt(e,n,r,o){if(!e)return r;var i=arguments.length<3;n=t.createCallback(n,o,4);var a=-1,u=e.length;if("number"==typeof u)for(i&&(r=e[++a]);++a<u;)r=n(r,e[a],a,e);else lr(e,function(e,t,o){r=i?(i=!1,e):n(r,e,t,o)});return r}function rt(e,n,r,o){var i=arguments.length<3;return n=t.createCallback(n,o,4),Xe(e,function(e,t,o){r=i?(i=!1,e):n(r,e,t,o)}),r}function ot(e,n,r){return n=t.createCallback(n,r,3),Ve(e,function(e,t,r){return!n(e,t,r)})}function it(e,t,n){if(e&&"number"!=typeof e.length&&(e=We(e)),null==t||n)return e?e[re(0,e.length-1)]:m;var r=at(e);return r.length=$n(Bn(0,t),r.length),r}function at(e){var t=-1,n=e?e.length:0,r=hn("number"==typeof n?n:0);return Je(e,function(e){var n=re(0,++t);r[t]=r[n],r[n]=e}),r}function ut(e){var t=e?e.length:0;return"number"==typeof t?t:er(e).length}function lt(e,n,r){var o;n=t.createCallback(n,r,3);var i=-1,a=e?e.length:0;if("number"==typeof a)for(;++i<a&&!(o=n(e[i],i,e)););else lr(e,function(e,t,r){return!(o=n(e,t,r))});return!!o}function ft(e,n,r){var o=-1,i=Zn(n),a=e?e.length:0,l=hn("number"==typeof a?a:0);for(i||(n=t.createCallback(n,r,3)),Je(e,function(e,t,r){var a=l[++o]=s();i?a.criteria=Qe(n,function(t){return e[t]}):(a.criteria=c())[0]=n(e,t,r),a.index=o,a.value=e}),a=l.length,l.sort(u);a--;){var f=l[a];l[a]=f.value,i||d(f.criteria),p(f)}return l}function ct(e){return e&&"number"==typeof e.length?h(e):We(e)}function st(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var o=e[t];o&&r.push(o)}return r}function dt(e){return Z(e,Q(arguments,!0,!0,1))}function pt(e,n,r){var o=-1,i=e?e.length:0;for(n=t.createCallback(n,r,3);++o<i;)if(n(e[o],o,e))return o;return-1}function ht(e,n,r){var o=e?e.length:0;for(n=t.createCallback(n,r,3);o--;)if(n(e[o],o,e))return o;return-1}function vt(e,n,r){var o=0,i=e?e.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=t.createCallback(n,r,3);++a<i&&n(e[a],a,e);)o++}else if(o=n,null==o||r)return e?e[0]:m;return h(e,0,$n(Bn(0,o),i))}function mt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=Qe(e,n,r)),Q(e,t)}function gt(e,t,n){if("number"==typeof n){var o=e?e.length:0;n=0>n?Bn(0,o+n):n||0}else if(n){var i=Ot(e,t);return e[i]===t?i:-1}return r(e,t,n)}function yt(e,n,r){var o=0,i=e?e.length:0;if("number"!=typeof n&&null!=n){var a=i;for(n=t.createCallback(n,r,3);a--&&n(e[a],a,e);)o++}else o=null==n||r?1:n||o;return h(e,0,$n(Bn(0,i-o),i))}function bt(){for(var e=[],t=-1,n=arguments.length,i=c(),a=le(),u=a===r,f=c();++t<n;){var s=arguments[t];(Zn(s)||de(s))&&(e.push(s),i.push(u&&s.length>=_&&l(t?e[t]:f)))}var h=e[0],v=-1,m=h?h.length:0,g=[];e:for(;++v<m;){var y=i[0];if(s=h[v],(y?o(y,s):a(f,s))<0){for(t=n,(y||f).push(s);--t;)if(y=i[t],(y?o(y,s):a(e[t],s))<0)continue e;g.push(s)}}for(;n--;)y=i[n],y&&p(y);return d(i),d(f),g}function wt(e,n,r){var o=0,i=e?e.length:0;if("number"!=typeof n&&null!=n){var a=i;for(n=t.createCallback(n,r,3);a--&&n(e[a],a,e);)o++}else if(o=n,null==o||r)return e?e[i-1]:m;return h(e,Bn(0,i-o))}function _t(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?Bn(0,r+n):$n(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Mt(e){for(var t=arguments,n=0,r=t.length,o=e?e.length:0;++n<r;)for(var i=-1,a=t[n];++i<o;)e[i]===a&&(Fn.call(e,i--,1),o--);return e}function Tt(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,o=Bn(0,kn((t-e)/(n||1))),i=hn(o);++r<o;)i[r]=e,e+=n;return i}function Et(e,n,r){var o=-1,i=e?e.length:0,a=[];for(n=t.createCallback(n,r,3);++o<i;){var u=e[o];n(u,o,e)&&(a.push(u),Fn.call(e,o--,1),i--)}return a}function xt(e,n,r){if("number"!=typeof n&&null!=n){var o=0,i=-1,a=e?e.length:0;for(n=t.createCallback(n,r,3);++i<a&&n(e[i],i,e);)o++}else o=null==n||r?1:Bn(0,n);return h(e,o)}function Ot(e,n,r,o){var i=0,a=e?e.length:i;for(r=r?t.createCallback(r,o,1):Xt,n=r(n);a>i;){var u=i+a>>>1;r(e[u])<n?i=u+1:a=u}return i}function jt(){return oe(Q(arguments,!0,!0))}function Rt(e,n,r,o){return"boolean"!=typeof n&&null!=n&&(o=r,r="function"!=typeof n&&o&&o[n]===e?null:n,n=!1),null!=r&&(r=t.createCallback(r,o,3)),oe(e,n,r)}function kt(e){return Z(e,h(arguments,1))}function St(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Zn(n)||de(n))var r=r?oe(Z(r,n).concat(Z(n,r))):n}return r||[]}function Pt(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?et(pr(e,"length")):0,r=hn(0>n?0:n);++t<n;)r[t]=pr(e,t);return r}function Ht(e,t){var n=-1,r=e?e.length:0,o={};for(t||!r||Zn(e[0])||(t=[]);++n<r;){var i=e[n];t?o[i]=t[n]:i&&(o[i[0]]=i[1])}return o}function Ct(e,t){if(!ke(t))throw new Tn;return function(){return--e<1?t.apply(this,arguments):void 0}}function Lt(e,t){return arguments.length>2?ae(e,17,h(arguments,2),null,t):ae(e,1,null,null,t)}function At(e){for(var t=arguments.length>1?Q(arguments,!0,!1,1):we(e),n=-1,r=t.length;++n<r;){var o=t[n];e[o]=ae(e[o],1,null,null,e)}return e}function zt(e,t){return arguments.length>2?ae(t,19,h(arguments,2),null,e):ae(t,3,null,null,e)}function Ft(){for(var e=arguments,t=e.length;t--;)if(!ke(e[t]))throw new Tn;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Dt(e,t){return t="number"==typeof t?t:+t||e.length,ae(e,4,null,null,null,t)}function It(e,t,n){var r,o,i,a,u,l,f,c=0,s=!1,d=!0;if(!ke(e))throw new Tn;if(t=Bn(0,t)||0,n===!0){var p=!0;d=!1}else Se(n)&&(p=n.leading,s="maxWait"in n&&(Bn(t,n.maxWait)||0),d="trailing"in n?n.trailing:d);var h=function(){var n=t-(vr()-a);if(0>=n){o&&Sn(o);var s=f;o=l=f=m,s&&(c=vr(),i=e.apply(u,r),l||o||(r=u=null))}else l=zn(h,n)},v=function(){l&&Sn(l),o=l=f=m,(d||s!==t)&&(c=vr(),i=e.apply(u,r),l||o||(r=u=null))};return function(){if(r=arguments,a=vr(),u=this,f=d&&(l||!p),s===!1)var n=p&&!l;else{o||p||(c=a);var m=s-(a-c),g=0>=m;g?(o&&(o=Sn(o)),c=a,i=e.apply(u,r)):o||(o=zn(v,m))}return g&&l?l=Sn(l):l||t===s||(l=zn(h,t)),n&&(g=!0,i=e.apply(u,r)),!g||l||o||(r=u=null),i}}function qt(e){if(!ke(e))throw new Tn;var t=h(arguments,1);return zn(function(){e.apply(m,t)},1)}function Ut(e,t){if(!ke(e))throw new Tn;var n=h(arguments,2);return zn(function(){e.apply(m,n)},t)}function Gt(e,t){if(!ke(e))throw new Tn;var n=function(){var r=n.cache,o=t?t.apply(this,arguments):w+arguments[0];return Ln.call(r,o)?r[o]:r[o]=e.apply(this,arguments)};return n.cache={},n}function Wt(e){var t,n;if(!ke(e))throw new Tn;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Nt(e){return ae(e,16,h(arguments,1))}function Bt(e){return ae(e,32,null,h(arguments,1))}function $t(e,t,n){var r=!0,o=!0;if(!ke(e))throw new Tn;return n===!1?r=!1:Se(n)&&(r="leading"in n?n.leading:r,o="trailing"in n?n.trailing:o),V.leading=r,V.maxWait=t,V.trailing=o,It(e,t,V)}function Vt(e,t){return ae(t,16,[e])}function Yt(e){return function(){return e}}function Kt(e,t,n){var r=typeof e;if(null==e||"function"==r)return M(e,t,n);if("object"!=r)return tn(e);var o=er(e),i=o[0],a=e[i];return 1!=o.length||a!==a||Se(a)?function(t){for(var n=o.length,r=!1;n--&&(r=ee(t[o[n]],e[o[n]],null,!0)););return r}:function(e){var t=e[i];return a===t&&(0!==a||1/a==1/t)}}function Jt(e){return null==e?"":Mn(e).replace(or,ue)}function Xt(e){return e}function Zt(e,r,o){var i=!0,a=r&&we(r);r&&(o||a.length)||(null==o&&(o=r),u=n,r=e,e=t,a=we(r)),o===!1?i=!1:Se(o)&&"chain"in o&&(i=o.chain);var u=e,l=ke(u);Je(a,function(t){var n=e[t]=r[t];l&&(u.prototype[t]=function(){var t=this.__chain__,r=this.__wrapped__,o=[r];An.apply(o,arguments);var a=n.apply(e,o);if(i||t){if(r===a&&Se(a))return this;a=new u(a),a.__chain__=t}return a})})}function Qt(){return e._=On,this}function en(){}function tn(e){return function(t){return t[e]}}function nn(e,t,n){var r=null==e,o=null==t;if(null==n&&("boolean"==typeof e&&o?(n=e,e=1):o||"boolean"!=typeof t||(n=t,o=!0)),r&&o&&(t=1),e=+e||0,o?(t=e,e=0):t=+t||0,n||e%1||t%1){var i=Yn();return $n(e+i*(t-e+parseFloat("1e-"+((i+"").length-1))),t)}return re(e,t)}function rn(e,t){if(e){var n=e[t];return ke(n)?e[t]():n}}function on(e,n,r){var o=t.templateSettings;e=Mn(e||""),r=ar({},r,o);var i,a=ar({},r.imports,o.imports),u=er(a),l=We(a),c=0,s=r.interpolate||H,d="__p += '",p=_n((r.escape||H).source+"|"+s.source+"|"+(s===S?j:H).source+"|"+(r.evaluate||H).source+"|$","g");e.replace(p,function(t,n,r,o,a,u){return r||(r=o),d+=e.slice(c,u).replace(L,f),n&&(d+="' +\n__e("+n+") +\n'"),a&&(i=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),d+="';\n";var h=r.variable,v=h;v||(h="obj",d="with ("+h+") {\n"+d+"\n}\n"),d=(i?d.replace(E,""):d).replace(x,"$1").replace(O,"$1;"),d="function("+h+") {\n"+(v?"":h+" || ("+h+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+z++ +"]")+"\n*/";try{var y=gn(u,"return "+d+g).apply(m,l)}catch(b){throw b.source=d,b}return n?y(n):(y.source=d,y)}function an(e,t,n){e=(e=+e)>-1?e:0;var r=-1,o=hn(e);for(t=M(t,n,1);++r<e;)o[r]=t(r);return o}function un(e){return null==e?"":Mn(e).replace(rr,se)}function ln(e){var t=++b;return Mn(null==e?"":e)+t}function fn(e){return e=new n(e),e.__chain__=!0,e}function cn(e,t){return t(e),e}function sn(){return this.__chain__=!0,this}function dn(){return Mn(this.__wrapped__)}function pn(){return this.__wrapped__}e=e?ne.defaults(X.Object(),e,ne.pick(X,A)):X;var hn=e.Array,vn=e.Boolean,mn=e.Date,gn=e.Function,yn=e.Math,bn=e.Number,wn=e.Object,_n=e.RegExp,Mn=e.String,Tn=e.TypeError,En=[],xn=wn.prototype,On=e._,jn=xn.toString,Rn=_n("^"+Mn(jn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),kn=yn.ceil,Sn=e.clearTimeout,Pn=yn.floor,Hn=gn.prototype.toString,Cn=fe(Cn=wn.getPrototypeOf)&&Cn,Ln=xn.hasOwnProperty,An=En.push,zn=e.setTimeout,Fn=En.splice,Dn=En.unshift,In=function(){try{var e={},t=fe(t=wn.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),qn=fe(qn=wn.create)&&qn,Un=fe(Un=hn.isArray)&&Un,Gn=e.isFinite,Wn=e.isNaN,Nn=fe(Nn=wn.keys)&&Nn,Bn=yn.max,$n=yn.min,Vn=e.parseInt,Yn=yn.random,Kn={};Kn[D]=hn,Kn[I]=vn,Kn[q]=mn,Kn[U]=gn,Kn[W]=wn,Kn[G]=bn,Kn[N]=_n,Kn[B]=Mn,n.prototype=t.prototype;var Jn=t.support={};Jn.funcDecomp=!fe(e.WinRTError)&&C.test(v),Jn.funcNames="string"==typeof gn.name,t.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:S,variable:"",imports:{_:t}},qn||(y=function(){function t(){}return function(n){if(Se(n)){t.prototype=n;var r=new t;t.prototype=null}return r||e.Object()}}());var Xn=In?function(e,t){Y.value=t,In(e,"__bindData__",Y),Y.value=null}:en,Zn=Un||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&jn.call(e)==D||!1},Qn=function(e){var t,n=e,r=[];if(!n)return r;if(!K[typeof e])return r;for(t in n)Ln.call(n,t)&&r.push(t);return r},er=Nn?function(e){return Se(e)?Nn(e):[]}:Qn,tr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nr=Me(tr),rr=_n("("+er(nr).join("|")+")","g"),or=_n("["+er(tr).join("")+"]","g"),ir=function(e,t,n){var r,o=e,i=o;if(!o)return i;var a=arguments,u=0,l="number"==typeof n?2:a.length;if(l>3&&"function"==typeof a[l-2])var f=M(a[--l-1],a[l--],2);else l>2&&"function"==typeof a[l-1]&&(f=a[--l]);for(;++u<l;)if(o=a[u],o&&K[typeof o])for(var c=-1,s=K[typeof o]&&er(o),d=s?s.length:0;++c<d;)r=s[c],i[r]=f?f(i[r],o[r]):o[r];return i},ar=function(e,t,n){var r,o=e,i=o;if(!o)return i;for(var a=arguments,u=0,l="number"==typeof n?2:a.length;++u<l;)if(o=a[u],o&&K[typeof o])for(var f=-1,c=K[typeof o]&&er(o),s=c?c.length:0;++f<s;)r=c[f],"undefined"==typeof i[r]&&(i[r]=o[r]);return i},ur=function(e,t,n){var r,o=e,i=o;if(!o)return i;if(!K[typeof o])return i;t=t&&"undefined"==typeof n?t:M(t,n,3);for(r in o)if(t(o[r],r,e)===!1)return i;return i},lr=function(e,t,n){var r,o=e,i=o;if(!o)return i;if(!K[typeof o])return i;t=t&&"undefined"==typeof n?t:M(t,n,3);for(var a=-1,u=K[typeof o]&&er(o),l=u?u.length:0;++a<l;)if(r=u[a],t(o[r],r,e)===!1)return i;return i},fr=Cn?function(e){if(!e||jn.call(e)!=W)return!1;var t=e.valueOf,n=fe(t)&&(n=Cn(t))&&Cn(n);return n?e==n||Cn(e)==n:ce(e)}:ce,cr=ie(function(e,t,n){Ln.call(e,n)?e[n]++:e[n]=1}),sr=ie(function(e,t,n){(Ln.call(e,n)?e[n]:e[n]=[]).push(t)}),dr=ie(function(e,t,n){e[n]=t}),pr=Qe,hr=Ve,vr=fe(vr=mn.now)&&vr||function(){return(new mn).getTime()},mr=8==Vn(T+"08")?Vn:function(e,t){return Vn(Ae(e)?e.replace(P,""):e,t||0)};return t.after=Ct,t.assign=ir,t.at=Ne,t.bind=Lt,t.bindAll=At,t.bindKey=zt,t.chain=fn,t.compact=st,t.compose=Ft,t.constant=Yt,t.countBy=cr,t.create=ve,t.createCallback=Kt,t.curry=Dt,t.debounce=It,t.defaults=ar,t.defer=qt,t.delay=Ut,t.difference=dt,t.filter=Ve,t.flatten=mt,t.forEach=Je,t.forEachRight=Xe,t.forIn=ur,t.forInRight=ye,t.forOwn=lr,t.forOwnRight=be,t.functions=we,t.groupBy=sr,t.indexBy=dr,t.initial=yt,t.intersection=bt,t.invert=Me,t.invoke=Ze,t.keys=er,t.map=Qe,t.mapValues=Fe,t.max=et,t.memoize=Gt,t.merge=De,t.min=tt,t.omit=Ie,t.once=Wt,t.pairs=qe,t.partial=Nt,t.partialRight=Bt,t.pick=Ue,t.pluck=pr,t.property=tn,t.pull=Mt,t.range=Tt,t.reject=ot,t.remove=Et,t.rest=xt,t.shuffle=at,t.sortBy=ft,t.tap=cn,t.throttle=$t,t.times=an,t.toArray=ct,t.transform=Ge,t.union=jt,t.uniq=Rt,t.values=We,t.where=hr,t.without=kt,t.wrap=Vt,t.xor=St,t.zip=Pt,t.zipObject=Ht,t.collect=Qe,t.drop=xt,t.each=Je,t.eachRight=Xe,t.extend=ir,t.methods=we,t.object=Ht,t.select=Ve,t.tail=xt,t.unique=Rt,t.unzip=Pt,Zt(t),t.clone=pe,t.cloneDeep=he,t.contains=Be,t.escape=Jt,t.every=$e,t.find=Ye,t.findIndex=pt,t.findKey=me,t.findLast=Ke,t.findLastIndex=ht,t.findLastKey=ge,t.has=_e,t.identity=Xt,t.indexOf=gt,t.isArguments=de,t.isArray=Zn,t.isBoolean=Te,t.isDate=Ee,t.isElement=xe,t.isEmpty=Oe,t.isEqual=je,t.isFinite=Re,t.isFunction=ke,t.isNaN=Pe,t.isNull=He,t.isNumber=Ce,t.isObject=Se,t.isPlainObject=fr,t.isRegExp=Le,t.isString=Ae,t.isUndefined=ze,t.lastIndexOf=_t,t.mixin=Zt,t.noConflict=Qt,t.noop=en,t.now=vr,t.parseInt=mr,t.random=nn,t.reduce=nt,t.reduceRight=rt,t.result=rn,t.runInContext=v,t.size=ut,t.some=lt,t.sortedIndex=Ot,t.template=on,t.unescape=un,t.uniqueId=ln,t.all=$e,t.any=lt,t.detect=Ye,t.findWhere=Ye,t.foldl=nt,t.foldr=rt,t.include=Be,t.inject=nt,Zt(function(){var e={};return lr(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.first=vt,t.last=wt,t.sample=it,t.take=vt,t.head=vt,lr(t,function(e,r){var o="sample"!==r;t.prototype[r]||(t.prototype[r]=function(t,r){var i=this.__chain__,a=e(this.__wrapped__,t,r);return i||null!=t&&(!r||o&&"function"==typeof t)?new n(a,i):a})}),t.VERSION="2.4.2",t.prototype.chain=sn,t.prototype.toString=dn,t.prototype.value=pn,t.prototype.valueOf=pn,Je(["join","pop","shift"],function(e){var r=En[e];t.prototype[e]=function(){var e=this.__chain__,t=r.apply(this.__wrapped__,arguments);return e?new n(t,e):t}}),Je(["push","reverse","sort","unshift"],function(e){var n=En[e];t.prototype[e]=function(){return n.apply(this.__wrapped__,arguments),this}}),Je(["concat","slice","splice"],function(e){var r=En[e];t.prototype[e]=function(){return new n(r.apply(this.__wrapped__,arguments),this.__chain__)}}),t}var m,g=[],y=[],b=0,w=+new Date+"",_=75,M=40,T=" 	\x0B\f \ufeff\n\r\u2028\u2029 ᠎             　",E=/\b__p \+= '';/g,x=/\b(__p \+=) '' \+/g,O=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,R=/\w*$/,k=/^\s*function[ \n\r\t]+\w/,S=/<%=([\s\S]+?)%>/g,P=RegExp("^["+T+"]*0+(?=.$)"),H=/($^)/,C=/\bthis\b/,L=/['\n\r\t\u2028\u2029\\]/g,A=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],z=0,F="[object Arguments]",D="[object Array]",I="[object Boolean]",q="[object Date]",U="[object Function]",G="[object Number]",W="[object Object]",N="[object RegExp]",B="[object String]",$={};$[U]=!1,$[F]=$[D]=$[I]=$[q]=$[G]=$[W]=$[N]=$[B]=!0;var V={leading:!1,maxWait:0,trailing:!1},Y={configurable:!1,enumerable:!1,value:null,writable:!1},K={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},J={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=K[typeof window]&&window||this,Z=K[typeof n]&&n&&!n.nodeType&&n,Q=K[typeof t]&&t&&!t.nodeType&&t,ee=Q&&Q.exports===Z&&Z,te=K[typeof e]&&e;!te||te.global!==te&&te.window!==te||(X=te);var ne=v();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(X._=ne,define(function(){return ne})):Z&&Q?ee?(Q.exports=ne)._=ne:Z._=ne:X._=ne}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){function r(){c=!1,u.length?f=u.concat(f):s=-1,f.length&&o()}function o(){if(!c){var e=setTimeout(r);c=!0;for(var t=f.length;t;){for(u=f,f=[];++s<t;)u&&u[s].run();s=-1,t=f.length}u=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var u,l=t.exports={},f=[],c=!1,s=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new i(e,t)),1!==f.length||c||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],4:[function(e,t,n){"use strict";t.exports=e("./lib/core.js"),e("./lib/done.js"),e("./lib/es6-extensions.js"),e("./lib/node-extensions.js")},{"./lib/core.js":5,"./lib/done.js":6,"./lib/es6-extensions.js":7,"./lib/node-extensions.js":8}],5:[function(e,t,n){"use strict";function r(e){function t(e){return null===l?void c.push(e):void a(function(){var t=l?e.onFulfilled:e.onRejected;if(null===t)return void(l?e.resolve:e.reject)(f);var n;try{n=t(f)}catch(r){return void e.reject(r)}e.resolve(n)})}function n(e){try{if(e===s)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void i(t.bind(e),n,r)}l=!0,f=e,u()}catch(o){r(o)}}function r(e){l=!1,f=e,u()}function u(){for(var e=0,n=c.length;n>e;e++)t(c[e]);c=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");var l=null,f=null,c=[],s=this;this.then=function(e,n){return new s.constructor(function(r,i){t(new o(e,n,r,i))})},i(e,n,r)}function o(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,
this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function i(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(o){if(r)return;r=!0,n(o)}}var a=e("asap");t.exports=r},{asap:1}],6:[function(e,t,n){"use strict";var r=e("./core.js"),o=e("asap");t.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){o(function(){throw e})})}},{"./core.js":5,asap:1}],7:[function(e,t,n){"use strict";function r(e){this.then=function(t){return"function"!=typeof t?this:new o(function(n,r){i(function(){try{n(t(e))}catch(o){r(o)}})})}}var o=e("./core.js"),i=e("asap");t.exports=o,r.prototype=o.prototype;var a=new r(!0),u=new r(!1),l=new r(null),f=new r(void 0),c=new r(0),s=new r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return l;if(void 0===e)return f;if(e===!0)return a;if(e===!1)return u;if(0===e)return c;if(""===e)return s;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new o(t.bind(e))}catch(n){return new o(function(e,t){t(n)})}return new r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){r(i,e)},n)}t[i]=a,0===--o&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":5,asap:1}],8:[function(e,t,n){"use strict";var r=e("./core.js"),o=e("asap");t.exports=r,r.denodeify=function(e,t){return t=t||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments);return new r(function(r,i){for(;o.length&&o.length>t;)o.pop();o.push(function(e,t){e?i(e):r(t)});var a=e.apply(n,o);!a||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then||r(a)})}},r.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,i=this;try{return e.apply(this,arguments).nodeify(n,i)}catch(a){if(null===n||"undefined"==typeof n)return new r(function(e,t){t(a)});o(function(){n.call(i,a)})}}},r.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},{"./core.js":5,asap:1}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=e("lodash"),a=r(i),u=e("./utils"),l=r(u),f="https://endgame-chess.firebaseio.com",c=8,s=["white","black"],d=["1","2","3","4","5","6","7","8"],p=["a","b","c","d","e","f","g","h"],h=["rook","knight","bishop","queen","king","bishop","knight","rook"],v=function(e){var t=o(e,2),n=t[0],r=t[1];return{pos:n.join(""),type:r}},m=function(e,t){return a["default"].map(a["default"].zip(a["default"].zip(p,l["default"].repeat(e,c)),t),v)};n["default"]={dbBaseUrl:f,usersUrl:f+"/users",gamesUrl:f+"/games",peerJsKey:"e47332e9vb4yrpb9",iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}],localMediaWidth:240,mediaWidth:320,mediaHeight:240,mediaMinFrameRate:10,pieces:["pawn","knight","bishop","rook","queen","king"],assets:["board"],sides:s,ranks:d,files:p,startPosition:{white:m("2",l["default"].repeat("pawn",c)).concat(m("1",h)),black:m("7",l["default"].repeat("pawn",c)).concat(m("8",h))},rankToOffset:a["default"].zipObject(d,a["default"].range(c)),fileToOffset:a["default"].zipObject(p,a["default"].range(c)),gameOpts:{boardScale:4.7,boardStartOffset:16.5,tileSize:4.7,tileOpacity:.4,pieceYOffset:1.7,cameraStartPos:{x:30,y:15,z:30},cameraPlayPos:{x:0,y:22,z:45},cameraPlayLookAt:{x:0,y:5,z:0},friendScreenSize:{x:30,y:20,z:5},friendScreenPos:{x:0,y:10,z:-30}},colors:{pieces:{white:{color:14540253,ambient:16777215,emissive:0,specular:11184810},black:{color:2236962,ambient:0,emissive:0,specular:1118481}},tiles:{active:16753920,legal:8044866,selected:3832473,prevFrom:6475007,prevTo:14297120},clear:"lightgray",friendScreen:14342874}}},{"./utils":19,lodash:2}],10:[function(e,t,n){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}e("./polyfills");var r=e("promise"),o=n(r),i=e("lodash"),a=(n(i),e("./user")),u=(n(a),e("./game")),l=n(u),f=e("./media"),c=n(f),s=e("./routes"),d=n(s),p=e("./rtc"),h=n(p),v=e("./scene"),m=n(v),g=e("./config"),y=n(g),b=e("./utils"),w=(n(b),e("./views")),_=n(w),M=e("./log"),T=n(M),E={config:y["default"],main:function(){var e=this;m["default"].init(),m["default"].loadGameGeometry().then(m["default"].setupBoard.bind(m["default"])).done(),m["default"].beginRender();var t=d["default"].parseGameId();t?(e.isHost=!1,e.connectToGame(t)):(e.isHost=!0,e.setupGame())},setupGame:function(){var e=this;e.side="white",h["default"].init().then(l["default"].create.bind(l["default"])).then(_["default"].showWaitScreen.bind(_["default"])).then(h["default"].listen.bind(h["default"])).then(e.setupMedia.bind(e)).then(e.performMediaCalls.bind(e)).then(e.displayRemoteMedia.bind(e)).then(e.beginGame.bind(e)).done()},connectToGame:function(e){var t=this;t.side="black",h["default"].init().then(l["default"].join.bind(l["default"],e)).then(h["default"].connect.bind(h["default"])).then(t.setupMedia.bind(t)).then(t.performMediaCalls.bind(t)).then(t.displayRemoteMedia.bind(t)).then(t.beginGame.bind(t)).done()},setupMedia:function(){(0,T["default"])("setting up the media");var e=this;return _["default"].showMediaScreen().then(function(){return o["default"].all([new o["default"](function(t,n){h["default"].addDataListener(function(n,r){"mediarequestcomplete"===n.event?(e.remoteHasMedia=n.hasMedia,(0,T["default"])("remote media request complete:",e.remoteHasMedia),t()):(0,T["default"])("ERROR: unknown event type",n.event)},!0)}),c["default"].init().then(function(){e.localHasMedia=!0,(0,T["default"])("local media granted"),c["default"].playLocalStream(),h["default"].sendData({event:"mediarequestcomplete",hasMedia:!0})},function(){e.localHasMedia=!1,(0,T["default"])("local media denied"),h["default"].sendData({event:"mediarequestcomplete",hasMedia:!1})})])})},performMediaCalls:function(){(0,T["default"])("performing remote media calls");var e=this;if(!e.localHasMedia&&!e.remoteHasMedia)return o["default"].resolve();var t=e.isHost&&e.localHasMedia||!e.isHost&&!e.remoteHasMedia&&e.localHasMedia;return h["default"].performMediaCall(t,e.localHasMedia&&c["default"].localMediaStream)},displayRemoteMedia:function(e){var t=this;return new o["default"](function(n,r){t.remoteHasMedia?e.on("stream",function(e){var r=c["default"].configureRemoteStream(e);m["default"].addFriendScreen(t.side,r),n()}):(m["default"].addFriendScreen(t.side),n())})},beginGame:function(){(0,T["default"])("commencing game");var e=this;_["default"].showStatusScreen().then(function(){return new o["default"](function(t,n){e.chess=new Chess,e.isMyTurn="white"===e.side,m["default"].addTileControls(function(t){return e.chess.moves({square:t,verbose:!0})},function(t,n){var o=e.chess.move({from:t,to:n});o?(h["default"].sendData({event:"chessmove",move:o}),r(o)):(0,T["default"])("ERROR: illegal move attempted locally - bug?")});var r=function(t){e.isMyTurn=!e.isMyTurn,m["default"].performGraphicalMove(t)};h["default"].addDataListener(function(t,n){if("chessmove"===t.event)if(e.isMyTurn)(0,T["default"])("ERROR: opponent attempted to move on my turn");else{var o=e.chess.move(t.move);o?r(o):(0,T["default"])("ERROR: opponent attempted invalid move",t)}else(0,T["default"])("ERROR: unknown event type",t.event)})})}).done()}};t.endgame=E,E.main()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":9,"./game":11,"./log":12,"./media":13,"./polyfills":14,"./routes":15,"./rtc":16,"./scene":17,"./user":18,"./utils":19,"./views":20,lodash:2,promise:4}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("promise"),i=r(o),a=e("./config"),u=r(a),l=e("./log");r(l);n["default"]={create:function(e){var t=this;return t.ref=new Firebase(u["default"].gamesUrl),t.gameRef=t.ref.push(),t.gameRef.set({hostId:e}),i["default"].resolve(t.gameRef.key())},join:function(e){var t=this;return t.ref=new Firebase(u["default"].gamesUrl),t.gameRef=t.ref.child(e),new i["default"](function(e,n){t.gameRef.once("value",function(t){e(t.val().hostId)})})}}},{"./config":9,"./log":12,promise:4}],12:[function(e,t,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){e.console&&t&&console.log.apply(console,Array.prototype.slice.call(arguments))};var t=!0}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("promise"),i=r(o),a=e("./config"),u=r(a),l=e("./log");r(l);n["default"]={init:function(){var e=this;return new i["default"](function(t,n){return navigator.getUserMedia?void navigator.getUserMedia({video:{mandatory:{maxWidth:u["default"].mediaWidth,maxHeight:u["default"].mediaHeight,minFrameRate:u["default"].mediaMinFrameRate}},audio:!0},function(n){e.localMediaStream=n,t(n)},n):n()})},playLocalStream:function(){var e=this,t=$("#localvideo").get(0);e.playStream(e.localMediaStream,t);var n=!1;t.addEventListener("canplay",function(e){n||!t.videoHeight&&!t.videoWidth||(n=!0,t.width=u["default"].localMediaWidth,t.height=t.videoHeight/(t.videoWidth/u["default"].localMediaWidth),$("#localvideopanel").show("slow"))},!1)},configureRemoteStream:function(e){var t=this;t.remoteMediaStream=e;var n=document.createElement("video");return t.playStream(e,n),n},playStream:function(e,t){t.autoplay=!0,navigator.mozGetUserMedia?t.mozSrcObject=e:t.src=window.URL.createObjectURL(e)}}},{"./config":9,"./log":12,promise:4}],14:[function(e,t,n){"use strict";!function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+o)},o);return e=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia}(),function(){window.URL=window.URL||window.webkitURL}()},{}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("lodash"),i=r(o),a=e("./utils"),u=r(a);n["default"]={parseGameId:function(){return i["default"].last(u["default"].pathParts(window.location.pathname))||window.location.hash.substring(1)},genGameUrl:function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"#":"";return t+"/"+n+e}}},{"./utils":19,lodash:2}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("promise"),i=r(o),a=e("lodash"),u=r(a),l=e("./config"),f=r(l);n["default"]={init:function(){var e=this;return e.peer=new Peer({key:f["default"].peerJsKey,config:{iceServers:f["default"].iceServers}}),new i["default"](function(t,n){e.peer.on("open",t)})},listen:function(){var e=this;return new i["default"](function(t,n){e.peer.on("connection",function(n){e.conn=n,e.remoteId=n.peer,e.setupDataBus(n),t(n)})})},connect:function(e){var t=this,n=t.peer.connect(e,{reliable:!0});return t.conn=n,t.remoteId=n.peer,t.setupDataBus(n),i["default"].resolve(n)},setupDataBus:function(e){var t=this;t.queuedData=[],t.listeners=[],e.on("open",function(){e.on("data",function(n){var r=t.listeners.slice();u["default"].forEach(r,function(r){if(r.fn.call(t,n,e),r.once){var o=t.listeners.indexOf(r);-1!==o&&t.listeners.splice(o,1)}})}),u["default"].forEach(t.queuedData,function(e){t.conn.send(e)})})},addDataListener:function(e,t){var n=this;n.listeners.push({fn:e,once:t})},sendData:function(e){var t=this;t.conn.open?t.conn.send(e):t.queuedData.push(e)},performMediaCall:function(e,t){var n=this;return new i["default"](function(r,o){e?(n.call=n.peer.call(n.remoteId,t),r(n.call)):n.peer.on("call",function(e){n.call=e,t&&e.answer(t),r(n.call)})})}}},{"./config":9,lodash:2,promise:4}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("promise"),i=r(o),a=e("lodash"),u=r(a),l=e("./config"),f=r(l),c=e("./log"),s=r(c);n["default"]={init:function(){var e=this;e.scene=new THREE.Scene,e.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),e.renderer=e.createRenderer(),e.renderer.setClearColor(new THREE.Color(f["default"].colors.clear),1),e.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(e.renderer.domElement),window.addEventListener("resize",e.resize.bind(e),!1),e.addLighting(),e.setInitialCameraPos()},resize:function(){var e=this;e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)},createRenderer:function(){var e=this,t=e.webglAvailable()?new THREE.WebGLRenderer({antialias:!0}):new THREE.CanvasRenderer;return t},webglAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}},addLighting:function(){var e=this;e.dirLight=new THREE.DirectionalLight(16777215,.9),e.dirLight.position.set(0,80,0).normalize(),e.scene.add(e.dirLight),e.hemiLight=new THREE.HemisphereLight(16777215,16777215,.2),e.scene.add(e.hemiLight)},setInitialCameraPos:function(){var e=this;e.camera.position.x=f["default"].gameOpts.cameraStartPos.x,e.camera.position.y=f["default"].gameOpts.cameraStartPos.y,e.camera.position.z=f["default"].gameOpts.cameraStartPos.z,e.camera.lookAt(new THREE.Vector3(0,0,0))},setPlayCameraPos:function(e){var t=this;t.camera.position.x=f["default"].gameOpts.cameraPlayPos.x,t.camera.position.y=f["default"].gameOpts.cameraPlayPos.y,t.camera.position.z=("black"===e?-1:1)*f["default"].gameOpts.cameraPlayPos.z,t.camera.lookAt(new THREE.Vector3(f["default"].gameOpts.cameraPlayLookAt.x,f["default"].gameOpts.cameraPlayLookAt.y,f["default"].gameOpts.cameraPlayLookAt.z))},loadGameGeometry:function(){var e=this;return e.meshes={},i["default"].all(u["default"].map(f["default"].pieces.concat(f["default"].assets),function(t){return new i["default"](function(n,r){var o=new THREE.JSONLoader;o.load("data/"+t+".json",function(r,o){var i=o[0];if(u["default"].contains(f["default"].assets,t)){var a=new THREE.Mesh(r,i);e.meshes[t]=a}else r.computeFaceNormals(),r.computeVertexNormals(),u["default"].forEach(f["default"].sides,function(n){var o=i.clone();o.color.setHex(f["default"].colors.pieces[n].color),o.ambient.setHex(f["default"].colors.pieces[n].ambient),o.emissive.setHex(f["default"].colors.pieces[n].emissive),o.specular.setHex(f["default"].colors.pieces[n].specular);var a=new THREE.Mesh(r,o);e.meshes[n]||(e.meshes[n]={}),e.meshes[n][t]=a});(0,s["default"])("done loading",t),n()})})}))},setupBoard:function(){var e=this;e.addSkybox(),e.addBoard(),e.addPieces()},addSkybox:function(){var e=new THREE.MeshLambertMaterial({color:14342874,depthWrite:!1,side:THREE.BackSide}),t=new THREE.Mesh(new THREE.BoxGeometry(150,100,200),e);t.position.set(0,50,0)},addBoard:function(){var e=this;e.board=new THREE.Object3D,e.board.add(e.meshes.board),e.board.scale.set(f["default"].gameOpts.boardScale,f["default"].gameOpts.boardScale,f["default"].gameOpts.boardScale),e.scene.add(e.board)},addPieces:function(){var e=this;e.pieces={},e.captured={w:[],b:[]},u["default"].forEach(f["default"].startPosition,function(t,n){u["default"].forEach(t,function(t,r){e.addPiece(t.pos,t.type,n)})})},addPiece:function(e,t,n){(0,s["default"])("creating",t,n);var r=this,o=new THREE.Object3D;o.add(r.meshes[n][t].clone()),o.position.setY(f["default"].gameOpts.pieceYOffset),r.setPiecePosition(o,e),"white"===n&&(o.rotation.y=Math.PI),r.scene.add(o),r.pieces[e]={type:t,side:n,object:o}},addFriendScreen:function(e,t){var n=this,r=void 0;t?(n.friendVideo=t,n.friendTexture=new THREE.Texture(t),n.friendTexture.generateMipmaps=!1,r=new THREE.MeshLambertMaterial({map:n.friendTexture,emissive:15658734})):r=new THREE.MeshLambertMaterial({color:0});var o=new THREE.MeshLambertMaterial({color:f["default"].colors.friendScreen}),i=[o,o,o,o,r,o],a=new THREE.BoxGeometry(f["default"].gameOpts.friendScreenSize.x,f["default"].gameOpts.friendScreenSize.y,f["default"].gameOpts.friendScreenSize.z),u=new THREE.Mesh(a,new THREE.MeshFaceMaterial(i));u.position.set(f["default"].gameOpts.friendScreenPos.x,f["default"].gameOpts.friendScreenPos.y,f["default"].gameOpts.friendScreenPos.z),"black"===e&&(u.position.setZ(-f["default"].gameOpts.friendScreenPos.z),u.rotation.y=Math.PI),n.scene.add(u),n.setPlayCameraPos(e)},addTileControls:function(e,t){var n=this;n.legalCallback=e,n.moveCallback=t,n.tiles={};var r=new THREE.PlaneGeometry(f["default"].gameOpts.tileSize,f["default"].gameOpts.tileSize),o=new THREE.MeshLambertMaterial({color:f["default"].colors.tiles.active,side:THREE.DoubleSide,transparent:!0,opacity:0});u["default"].forEach(f["default"].files,function(e,t){u["default"].forEach(f["default"].ranks,function(t,i){n.addTileControl(e+t,r,o.clone())})}),n.raycaster=new THREE.Raycaster,n.addMouseListeners()},addTileControl:function(e,t,n){var r=this,o=f["default"].fileToOffset[e[0]],i=f["default"].rankToOffset[e[1]],a=new THREE.Mesh(t,n);a.rotation.x=Math.PI/2,a.position.setY(f["default"].gameOpts.pieceYOffset+.05),a.position.setX(-f["default"].gameOpts.boardStartOffset+o*f["default"].gameOpts.tileSize),a.position.setZ(f["default"].gameOpts.boardStartOffset-i*f["default"].gameOpts.tileSize),a.isTile=!0,a.chessPos=e,r.tiles[e]=a,r.scene.add(a)},addMouseListeners:function(){var e=this;e.mousePos=new THREE.Vector2,document.addEventListener("mousemove",e.onMouseMove.bind(e),!1),document.addEventListener("mousedown",e.onMouseDown.bind(e),!1),document.addEventListener("mouseup",e.onMouseUp.bind(e),!1)},onMouseMove:function(e){var t=this;t.updateMousePos(e),t.highlightActiveTile()},updateMousePos:function(e){var t=this;t.mousePos.x=e.clientX/window.innerWidth*2-1,t.mousePos.y=2*-(e.clientY/window.innerHeight)+1},highlightActiveTile:function(){var e=this;e.recolorTiles();var t=e.intersectTile();if(t){var n=t.object;e.colorTile(n,f["default"].colors.tiles.active)}},onMouseDown:function(e){e.preventDefault();var t=this;t.handleMoveSelection()},handleMoveSelection:function(){var e=this,t=e.intersectTile();if(t){var n=t.object;e.isSelectingPieceMovement?n.isLegalMove?(e.commitMove(n),e.resetTileHighlights()):(e.resetTileHighlights(),e.highlightLegalMoves(n)):e.highlightLegalMoves(n)}},commitMove:function(e){var t=this;t.moveCallback.call(t,t.selectedPos,e.chessPos),t.isSelectingPieceMovement=!1,t.selectedPos=null},highlightLegalMoves:function(e){var t=this;t.isSelectingPieceMovement=!0,t.selectedPos=e.chessPos,t.colorTile(e,f["default"].colors.tiles.selected),t.currentLegalMoves=t.legalCallback.call(t,e.chessPos),u["default"].forEach(t.currentLegalMoves,function(e){var n=t.tiles[e.to];n.isLegalMove=!0,t.colorTile(n,f["default"].colors.tiles.legal)})},resetTileHighlights:function(){var e=this;u["default"].forEach(e.tiles,function(e,t){e.isLegalMove=null}),e.recolorTiles()},recolorTiles:function(){var e=this;u["default"].forEach(e.tiles,function(t,n){e.hideTile(t),t.isLegalMove?e.colorTile(t,f["default"].colors.tiles.legal):t.chessPos==e.selectedPos?e.colorTile(t,f["default"].colors.tiles.selected):t.chessPos===e.prevPosFrom?e.colorTile(t,f["default"].colors.tiles.prevFrom):t.chessPos===e.prevPosTo&&e.colorTile(t,f["default"].colors.tiles.prevTo)})},colorTile:function(e,t){e.material.color.setHex(t),e.material.opacity=f["default"].gameOpts.tileOpacity},hideTile:function(e){e.material.opacity=0},performGraphicalMove:function(e){var t=this,n=t.pieces[e.from];if("undefined"==typeof n)return void(0,s["default"])("ERROR: piece not found - bug?");if(t.prevPosFrom=e.from,t.prevPosTo=e.to,-1!==e.flags.indexOf("e"),-1!==e.flags.indexOf("c")){var r=t.pieces[e.to];delete t.pieces[e.to],t.captured[e.color].push(r),t.hidePiece(r.object),delete t.pieces[e.from],t.pieces[e.to]=n,t.setPiecePosition(n.object,e.to)}-1===e.flags.indexOf("n")&&-1===e.flags.indexOf("b")||(delete t.pieces[e.from],t.pieces[e.to]=n,t.setPiecePosition(n.object,e.to)),-1!==e.flags.indexOf("p"),-1!==e.flags.indexOf("k"),-1!==e.flags.indexOf("q"),t.recolorTiles()},onMouseUp:function(e){e.preventDefault()},intersectTile:function(){var e=this;e.raycaster.setFromCamera(e.mousePos,e.camera);var t=e.raycaster.intersectObjects(e.scene.children);return u["default"].first(u["default"].filter(t,function(e){return e.object.isTile}))},setPiecePosition:function(e,t){var n=f["default"].fileToOffset[t[0]],r=f["default"].rankToOffset[t[1]];e.position.setX(-f["default"].gameOpts.boardStartOffset+n*f["default"].gameOpts.tileSize),e.position.setZ(f["default"].gameOpts.boardStartOffset-r*f["default"].gameOpts.tileSize)},hidePiece:function(e){e.visible=!1},beginRender:function(){var e=this;e.render=e.render.bind(e),e.previousTime=(new Date).getTime(),e.requestId=requestAnimationFrame(e.render)},render:function(e){var t=this;t.requestId=requestAnimationFrame(t.render);var n=(new Date).getTime();n-t.previousTime;t.previousTime=n,t.friendVideo&&t.friendVideo.readyState===t.friendVideo.HAVE_ENOUGH_DATA&&(t.friendTexture.needsUpdate=!0),t.renderer.render(t.scene,t.camera)}}},{"./config":9,"./log":12,lodash:2,promise:4}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./config"),i=r(o);n["default"]={init:function(){var e=this;e.ref=new Firebase(i["default"].usersUrl)}}},{"./config":9}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("lodash"),i=r(o);n["default"]={pathParts:function(e){return i["default"].filter(e.split("/"))},repeat:function(e,t){return i["default"].map(Array.apply(null,new Array(t)),this.identity.bind(null,e))},identity:function(e){return e}}},{lodash:2}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("promise"),i=r(o),a=e("./routes"),u=r(a),l=e("./log");r(l);n["default"]={showWaitScreen:function(e){var t=this;return t.waitScreen=new Vue({el:"#waitscreen",data:{link:u["default"].genGameUrl(e)}}),$("#waitscreen").modal({backdrop:!1,keyboard:!1}),i["default"].resolve()},showMediaScreen:function(){return $("#waitscreen").modal("hide"),$("#mediascreen").modal({backdrop:!1,keyboard:!1}),i["default"].resolve()},showStatusScreen:function(){return $("#mediascreen").modal("hide"),i["default"].resolve()}}},{"./log":12,"./routes":15,promise:4}]},{},[10]);
//# sourceMappingURL=public/endgame.min.js.map
